---
title: "dynamo white paper - notes"
tags:
aliases: 
parents: 
children: 
supports: 
enemies:
date: 2022-12-30
updated: 2024-03-24
---

![](zotero/attachments/6E4TXUZF.png)

## takeaways

- [ ] TODO: Learn more about how Merkle trees are used for replica synchronization.

- Dynamo is a key-value store.
- Highly scalable and available, while sacrificing for eventual consistency.
- Strategies used:
	- Consistent hashing for partitioning of data.
	- Leaderless replication using quorum-style consensus with configurable N, R, and W values.
	- Conflict resolution can be performed by the application or with simple heuristics like last-write-wins at the database level.
		- Version vectors are stored per key, and any diverging histories are fixed on a read, and the read repair is performed for nodes that have stale data.

## highlights

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%223NVFBMP3%22%2C%22color%22%3A%22%235fb236%22%2C%22pageLabel%22%3A%22195%22%2C%22position%22%3A%7B%22pageIndex%22%3A0%2C%22rects%22%3A%5B%5B414.175%2C536.432%2C557.991%2C546.399%5D%2C%5B318.24%2C526.052%2C557.955%2C536.019%5D%2C%5B318.24%2C515.732%2C558.057%2C525.699%5D%2C%5B318.24%2C505.352%2C406.085%2C515.319%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22195%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=1&#x26;annotation=3NVFBMP3">“For example, customers should be able to view and add items to their shopping cart even if disks are failing, network routes are flapping, or data centers are being destroyed by tornados.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22195%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 195</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22RU5MYUS4%22%2C%22color%22%3A%22%23e56eee%22%2C%22pageLabel%22%3A%22195%22%2C%22position%22%3A%7B%22pageIndex%22%3A0%2C%22rects%22%3A%5B%5B486.103%2C426.932%2C557.964%2C436.899%5D%2C%5B318.24%2C416.552%2C558.074%2C426.519%5D%2C%5B318.24%2C406.232%2C557.994%2C416.199%5D%2C%5B318.24%2C395.852%2C366.032%2C405.819%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22195%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=1&#x26;annotation=RU5MYUS4">“Amazon’s software systems need to be constructed in a manner that treats failure handling as the normal case without impacting availability or performance.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22195%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 195</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22I4KTUDU7%22%2C%22color%22%3A%22%23e56eee%22%2C%22pageLabel%22%3A%22196%22%2C%22position%22%3A%7B%22pageIndex%22%3A1%2C%22rects%22%3A%5B%5B187.26%2C610.774%2C293.765%2C620.74%5D%2C%5B54%2C600.394%2C293.76%2C610.361%5D%2C%5B54%2C590.074%2C293.749%2C600.04%5D%2C%5B54%2C579.694%2C67.015%2C589.661%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22196%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=2&#x26;annotation=I4KTUDU7">“the service that maintains shopping cart (Shopping Cart Service) served tens of millions requests that resulted in well over 3 million checkouts in a single day”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22196%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 196</a></span>)</span>

> Even though it's pretty obvious once you think about it, it is cool that there's a whole service needed just to handle shopping cart state!

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22SCM6E2PT%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22196%22%2C%22position%22%3A%7B%22pageIndex%22%3A1%2C%22rects%22%3A%5B%5B93.672%2C200.374%2C293.746%2C210.341%5D%2C%5B54%2C190.054%2C293.832%2C200.02%5D%2C%5B54%2C179.674%2C293.741%2C189.641%5D%2C%5B54%2C169.354%2C293.855%2C179.32%5D%2C%5B54%2C158.974%2C245.457%2C168.941%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22196%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=2&#x26;annotation=SCM6E2PT">“For many of the more common usage patterns of state persistence, however, a relational database is a solution that is far from ideal. Most of these services only store and retrieve data by primary key and do not require the complex querying and management functionality offered by an RDBMS.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22196%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 196</a></span>)</span> This is an interesting point that goes against what is typically first taught in schools and beginner coding workshops, but it's definitely true!

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22LFPZH9H8%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22196%22%2C%22position%22%3A%7B%22pageIndex%22%3A1%2C%22rects%22%3A%5B%5B480.739%2C570.274%2C557.971%2C580.241%5D%2C%5B318.24%2C559.894%2C558.072%2C569.861%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22196%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=2&#x26;annotation=LFPZH9H8">“No operations span multiple data items and there is no need for relational schema.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22196%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 196</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22V6J2TKY9%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22196%22%2C%22position%22%3A%7B%22pageIndex%22%3A1%2C%22rects%22%3A%5B%5B527.092%2C408.994%2C558.059%2C418.961%5D%2C%5B318.24%2C398.674%2C558.008%2C408.64%5D%2C%5B318.24%2C388.294%2C363.303%2C398.261%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22196%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=2&#x26;annotation=V6J2TKY9">“Dynamo does not provide any isolation guarantees and permits only single key updates.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22196%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 196</a></span>)</span> Because each query can only ever edit one key, there's no need to "isolate" a transaction from other transactions, because as long as the two concurrent transactions aren't operating on the same key, we're fine.

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22D4V2IHHS%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22197%22%2C%22position%22%3A%7B%22pageIndex%22%3A2%2C%22rects%22%3A%5B%5B262.85%2C147.695%2C293.821%2C157.662%5D%2C%5B54%2C137.374%2C293.751%2C147.341%5D%2C%5B54%2C126.995%2C293.769%2C136.962%5D%2C%5B54%2C116.674%2C293.634%2C126.641%5D%2C%5B54%2C106.293%2C182.546%2C117.607%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22197%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=3&#x26;annotation=D4V2IHHS">“An SLA stated in terms of mean or median response times will not address the performance of this important customer segment. To address this issue, at Amazon, SLAs are expressed and measured at the 99.9th percentile of the distribution.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22197%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 197</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22X2LS4WE8%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22197%22%2C%22position%22%3A%7B%22pageIndex%22%3A2%2C%22rects%22%3A%5B%5B478.519%2C200.374%2C558.041%2C210.34%5D%2C%5B318.24%2C190.053%2C557.992%2C200.02%5D%2C%5B318.24%2C179.674%2C558.058%2C189.64%5D%2C%5B318.24%2C169.353%2C558.01%2C179.32%5D%2C%5B318.24%2C158.974%2C558.029%2C168.94%5D%2C%5B318.24%2C148.653%2C558.112%2C158.62%5D%2C%5B318.24%2C138.274%2C558.126%2C148.24%5D%2C%5B318.24%2C127.953%2C558.079%2C137.92%5D%2C%5B318.24%2C117.574%2C557.909%2C127.54%5D%2C%5B318.24%2C107.253%2C558.095%2C117.22%5D%2C%5B318.24%2C96.874%2C393.914%2C106.84%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22197%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=3&#x26;annotation=X2LS4WE8">“Many traditional data stores execute conflict resolution during writes and keep the read complexity simple [7]. In such systems, writes may be rejected if the data store cannot reach all (or a majority of) the replicas at a given time. On the other hand, Dynamo targets the design space of an “always writeable” data store (i.e., a data store that is highly available for writes). For a number of Amazon services, rejecting customer updates could result in a poor customer experience. For instance, the shopping cart service must allow customers to add and remove items from their shopping cart even amidst network and server failures.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22197%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 197</a></span>)</span>

<span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22198%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 198</a></span>)</span> Dynamo allows for applications to define conflict-resolution logic, but allows falling back to simple mechanisms like last-write-wins.


<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22P5A43W23%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22199%22%2C%22position%22%3A%7B%22pageIndex%22%3A4%2C%22rects%22%3A%5B%5B352.428%2C170.194%2C558.055%2C180.16%5D%2C%5B318.24%2C159.873%2C546.461%2C169.84%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22199%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=5&#x26;annotation=P5A43W23">“Dynamo’s partitioning scheme relies on consistent hashing to distribute the load across multiple storage hosts.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22199%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 199</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22N3AMLA9C%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22200%22%2C%22position%22%3A%7B%22pageIndex%22%3A5%2C%22rects%22%3A%5B%5B72%2C398.463%2C293.866%2C408.461%5D%2C%5B72%2C388.174%2C293.669%2C398.141%5D%2C%5B72%2C377.854%2C177.592%2C387.82%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22200%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=6&#x26;annotation=N3AMLA9C">“The number of virtual nodes that a node is responsible can decided based on its capacity, accounting for heterogeneity in the physical infrastructure.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22200%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 200</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%2224S4PUC4%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22200%22%2C%22position%22%3A%7B%22pageIndex%22%3A5%2C%22rects%22%3A%5B%5B241.132%2C326.973%2C293.752%2C336.94%5D%2C%5B54%2C316.653%2C293.704%2C326.62%5D%2C%5B54%2C306.273%2C293.764%2C316.24%5D%2C%5B54%2C295.953%2C293.854%2C305.92%5D%2C%5B54%2C285.573%2C293.804%2C295.54%5D%2C%5B54%2C275.253%2C199.244%2C285.22%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22200%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=6&#x26;annotation=24S4PUC4">“Each key, k, is assigned to a coordinator node (described in the previous section). The coordinator is in charge of the replication of the data items that fall within its range. In addition to locally storing each key within its range, the coordinator replicates these keys at the N-1 clockwise successor nodes in the ring.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22200%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 200</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%227SWKAJ4D%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22200%22%2C%22position%22%3A%7B%22pageIndex%22%3A5%2C%22rects%22%3A%5B%5B318.24%2C220.174%2C558.014%2C230.14%5D%2C%5B318.24%2C209.853%2C490.352%2C219.82%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22200%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=6&#x26;annotation=7SWKAJ4D">“Dynamo uses vector clocks [12] in order to capture causality between different versions of the same object.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22200%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 200</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22PI4TQKVR%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22201%22%2C%22position%22%3A%7B%22pageIndex%22%3A6%2C%22rects%22%3A%5B%5B318.24%2C367.593%2C557.994%2C377.56%5D%2C%5B318.24%2C357.273%2C558.086%2C367.24%5D%2C%5B318.24%2C346.893%2C558.176%2C356.86%5D%2C%5B318.24%2C336.573%2C558.07%2C346.54%5D%2C%5B318.24%2C326.252%2C557.956%2C336.219%5D%2C%5B318.24%2C315.873%2C558.075%2C325.84%5D%2C%5B318.24%2C305.552%2C557.968%2C315.519%5D%2C%5B318.24%2C295.173%2C547.507%2C305.14%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22201%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=7&#x26;annotation=PI4TQKVR">“A node handling a read or write operation is known as the coordinator. Typically, this is the first among the top N nodes in the preference list. If the requests are received through a load balancer, requests to access a key may be routed to any random node in the ring. In this scenario, the node that receives the request will not coordinate it if the node is not in the top N of the requested key’s preference list. Instead, that node will forward the request to the first among the top N nodes in the preference list.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22201%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 201</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22NNBDM2IC%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22201%22%2C%22position%22%3A%7B%22pageIndex%22%3A6%2C%22rects%22%3A%5B%5B318.24%2C210.754%2C557.997%2C220.72%5D%2C%5B318.24%2C200.374%2C558.009%2C210.341%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22201%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=7&#x26;annotation=NNBDM2IC">“To maintain consistency among its replicas, Dynamo uses a consistency protocol similar to those used in quorum systems.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22201%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 201</a></span>)</span>

![](zotero/attachments/T3K4ERJW.png)

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22NNJC7W5B%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22202%22%2C%22position%22%3A%7B%22pageIndex%22%3A7%2C%22rects%22%3A%5B%5B96.974%2C471.094%2C293.708%2C481.061%5D%2C%5B54.001%2C460.774%2C293.836%2C470.741%5D%2C%5B54.001%2C450.394%2C293.873%2C460.361%5D%2C%5B54.001%2C440.074%2C293.772%2C450.041%5D%2C%5B54.001%2C429.694%2C293.764%2C439.661%5D%2C%5B54.001%2C419.374%2C293.781%2C429.341%5D%2C%5B54%2C408.994%2C293.811%2C418.961%5D%2C%5B54%2C398.674%2C293.823%2C408.641%5D%2C%5B54%2C388.294%2C293.737%2C398.261%5D%2C%5B54%2C377.974%2C293.8%2C387.941%5D%2C%5B54%2C367.594%2C293.896%2C377.561%5D%2C%5B54%2C357.274%2C103.82%2C367.241%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22202%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=8&#x26;annotation=NNJC7W5B">“In this example, if node A is temporarily down or unreachable during a write operation then a replica that would normally have lived on A will now be sent to node D. This is done to maintain the desired availability and durability guarantees. The replica sent to D will have a hint in its metadata that suggests which node was the intended recipient of the replica (in this case A). Nodes that receive hinted replicas will keep them in a separate local database that is scanned periodically. Upon detecting that A has recovered, D will attempt to deliver the replica to A. Once the transfer succeeds, D may delete the object from its local store without decreasing the total number of replicas in the system.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22202%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 202</a></span>)</span> How hinted handoff works.

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22LUVWLDE7%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22202%22%2C%22position%22%3A%7B%22pageIndex%22%3A7%2C%22rects%22%3A%5B%5B253.577%2C190.054%2C293.817%2C200.021%5D%2C%5B54%2C179.674%2C293.84%2C189.641%5D%2C%5B54%2C169.354%2C225.147%2C179.321%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22202%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=8&#x26;annotation=LUVWLDE7">“In essence, the preference list of a key is constructed such that the storage nodes are spread across multiple data centers.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22202%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 202</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%222ENK6LN3%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22202%22%2C%22position%22%3A%7B%22pageIndex%22%3A7%2C%22rects%22%3A%5B%5B469.544%2C156.333%2C557.991%2C166.3%5D%2C%5B318.24%2C146.013%2C558.064%2C155.98%5D%2C%5B318.24%2C135.633%2C558.056%2C145.6%5D%2C%5B318.24%2C125.313%2C558.01%2C135.28%5D%2C%5B318.24%2C114.933%2C478.558%2C124.9%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22202%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=8&#x26;annotation=2ENK6LN3">“A gossip-based protocol propagates membership changes and maintains an eventually consistent view of membership. Each node contacts a peer chosen at random every second and the two nodes efficiently reconcile their persisted membership change histories.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22202%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 202</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22KE587JIN%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22204%22%2C%22position%22%3A%7B%22pageIndex%22%3A9%2C%22rects%22%3A%5B%5B318.24%2C240.633%2C558.079%2C250.6%5D%2C%5B318.24%2C230.253%2C558.048%2C240.22%5D%2C%5B318.24%2C219.933%2C463.963%2C229.9%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22204%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=10&#x26;annotation=KE587JIN">“The main advantage of Dynamo is that its client applications can tune the values of N, R and W to achieve their desired levels of performance, availability and durability.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22204%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 204</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%222YZZWRX6%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22207%22%2C%22position%22%3A%7B%22pageIndex%22%3A12%2C%22rects%22%3A%5B%5B373.19%2C266.493%2C558.019%2C276.46%5D%2C%5B318.24%2C256.113%2C558.16%2C266.08%5D%2C%5B318.24%2C245.793%2C489.577%2C255.76%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22207%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=13&#x26;annotation=2YZZWRX6">“Any Dynamo node can act as a coordinator for a read request. Write requests on the other hand will be coordinated by a node in the key’s current preference list.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22207%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 207</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2F3MWL4ZV6%22%2C%22annotationKey%22%3A%22L3TLCVJJ%22%2C%22color%22%3A%22%23ffd400%22%2C%22pageLabel%22%3A%22207%22%2C%22position%22%3A%7B%22pageIndex%22%3A12%2C%22rects%22%3A%5B%5B318.24%2C177.694%2C558.061%2C187.66%5D%2C%5B318.24%2C167.314%2C558.012%2C177.281%5D%2C%5B318.24%2C156.994%2C558.022%2C166.96%5D%2C%5B318.24%2C146.614%2C557.984%2C156.581%5D%2C%5B318.24%2C136.294%2C557.922%2C146.26%5D%2C%5B318.24%2C125.914%2C558.057%2C135.881%5D%2C%5B318.24%2C115.594%2C558.012%2C125.56%5D%2C%5B318.24%2C105.214%2C558.092%2C115.181%5D%2C%5B318.24%2C94.894%2C558.059%2C104.86%5D%2C%5B318.24%2C84.573%2C466.123%2C94.54%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22207%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/3MWL4ZV6?page=13&#x26;annotation=L3TLCVJJ">“An alternative approach to request coordination is to move the state machine to the client nodes. In this scheme client applications use a library to perform request coordination locally. A client periodically picks a random Dynamo node and downloads its current view of Dynamo membership state. Using this information the client can determine which set of nodes form the preference list for any given key. Read requests can be coordinated at the client node thereby avoiding the extra network hop that is incurred if the request were assigned to a random Dynamo node by the load balancer.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F8596514%2Fitems%2FIAHP4AR8%22%5D%2C%22locator%22%3A%22207%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/IAHP4AR8">DeCandia et al., p. 207</a></span>)</span>

## references

- https://s3.amazonaws.com/systemsandpapers/papers/amazon-dynamo-sosp2007.pdf
